{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\abelm\\\\Desktop\\\\Covid19-App_Proyecto_GestionProyectosSoftware\\\\Covid-19_World_Statistics\\\\src\\\\components\\\\Deck.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport UIManager from \"react-native-web/dist/exports/UIManager\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport PanResponder from \"react-native-web/dist/exports/PanResponder\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport LayoutAnimation from \"react-native-web/dist/exports/LayoutAnimation\";\nvar SCREEN_WIDTH = Dimensions.get('window').width;\nvar SWIPE_THRESHOLD = 0.25 * SCREEN_WIDTH;\nvar SWIPE_OUT_DURATION = 250;\n\nvar Deck = function (_Component) {\n  _inherits(Deck, _Component);\n\n  var _super = _createSuper(Deck);\n\n  function Deck(props) {\n    var _this;\n\n    _classCallCheck(this, Deck);\n\n    _this = _super.call(this, props);\n    var position = new Animated.ValueXY();\n    var panResponder = PanResponder.create({\n      onStartShouldSetPanResponder: function onStartShouldSetPanResponder() {\n        return true;\n      },\n      onPanResponderMove: function onPanResponderMove(event, gesture) {\n        position.setValue({\n          x: gesture.dx,\n          y: gesture.dy\n        });\n      },\n      onPanResponderRelease: function onPanResponderRelease(event, gesture) {\n        if (gesture.dx > SWIPE_THRESHOLD) {\n          _this.forceSwipe(\"right\");\n        } else if (gesture.dx < -SWIPE_THRESHOLD) {\n          _this.forceSwipe(\"left\");\n        } else {\n          _this.resetPosition();\n        }\n      }\n    });\n    _this.state = {\n      panResponder: panResponder,\n      position: position,\n      index: 0\n    };\n    return _this;\n  }\n\n  _createClass(Deck, [{\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(nextProps) {\n      if (nextProps.data !== this.props.data) {\n        this.setState({\n          index: 0\n        });\n      }\n    }\n  }, {\n    key: \"UNSAFE_componentWillUpdate\",\n    value: function UNSAFE_componentWillUpdate() {\n      UIManager.setLayoutAnimationEnabledExperimental && UIManager.setLayoutAnimationEnabledExperimental(true);\n      LayoutAnimation.spring();\n    }\n  }, {\n    key: \"forceSwipe\",\n    value: function forceSwipe(direction) {\n      var _this2 = this;\n\n      var x = direction === \"right\" ? SCREEN_WIDTH : -SCREEN_WIDTH;\n      Animated.timing(this.state.position, {\n        useNativeDriver: false,\n        toValue: {\n          x: x,\n          y: 0\n        },\n        duration: SWIPE_OUT_DURATION\n      }).start(function () {\n        return _this2.onSwipeComplete(direction);\n      });\n    }\n  }, {\n    key: \"onSwipeComplete\",\n    value: function onSwipeComplete(direction) {\n      var _this$props = this.props,\n          onSwipeLeft = _this$props.onSwipeLeft,\n          onSwipeRight = _this$props.onSwipeRight,\n          data = _this$props.data;\n      var item = data[this.state.index];\n      direction === \"right\" ? onSwipeRight(item) : onSwipeLeft(item);\n      this.state.position.setValue({\n        x: 0,\n        y: 0\n      });\n      this.setState({\n        index: this.state.index + 1\n      });\n    }\n  }, {\n    key: \"resetPosition\",\n    value: function resetPosition() {\n      Animated.spring(this.state.position, {\n        useNativeDriver: false,\n        toValue: {\n          x: 0,\n          y: 0\n        }\n      }).start();\n    }\n  }, {\n    key: \"getCardStyle\",\n    value: function getCardStyle() {\n      var position = this.state.position;\n      var rotate = position.x.interpolate({\n        inputRange: [-SCREEN_WIDTH * 1.5, 0, SCREEN_WIDTH * 1.5],\n        outputRange: [\"-120deg\", \"0deg\", \"120deg\"]\n      });\n      return _objectSpread(_objectSpread({}, position.getLayout()), {}, {\n        transform: [{\n          rotate: rotate\n        }]\n      });\n    }\n  }, {\n    key: \"renderCards\",\n    value: function renderCards() {\n      var _this3 = this;\n\n      if (this.state.index >= this.props.data.length) {\n        return this.props.renderNoMoreCards();\n      }\n\n      return this.props.data.map(function (item, i) {\n        if (i < _this3.state.index) {\n          return null;\n        }\n\n        if (i === _this3.state.index) {\n          return React.createElement(Animated.View, _extends({\n            key: item.id,\n            style: [_this3.getCardStyle(), styles.cardStyle, {\n              zIndex: 99\n            }]\n          }, _this3.state.panResponder.panHandlers, {\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 13\n            }\n          }), _this3.props.renderCard(item));\n        }\n\n        return React.createElement(Animated.View, {\n          key: item.id,\n          style: [styles.cardStyle],\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 11\n          }\n        }, _this3.props.renderCard(item));\n      }).reverse();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 12\n        }\n      }, this.renderCards());\n    }\n  }]);\n\n  return Deck;\n}(Component);\n\nDeck.defaultProps = {\n  onSwipeRight: function onSwipeRight() {},\n  onSwipeLeft: function onSwipeLeft() {}\n};\nexport { Deck as default };\nvar styles = {\n  cardStyle: {\n    position: \"absolute\",\n    width: SCREEN_WIDTH\n  }\n};","map":{"version":3,"sources":["C:/Users/abelm/Desktop/Covid19-App_Proyecto_GestionProyectosSoftware/Covid-19_World_Statistics/src/components/Deck.js"],"names":["React","Component","SCREEN_WIDTH","Dimensions","get","width","SWIPE_THRESHOLD","SWIPE_OUT_DURATION","Deck","props","position","Animated","ValueXY","panResponder","PanResponder","create","onStartShouldSetPanResponder","onPanResponderMove","event","gesture","setValue","x","dx","y","dy","onPanResponderRelease","forceSwipe","resetPosition","state","index","nextProps","data","setState","UIManager","setLayoutAnimationEnabledExperimental","LayoutAnimation","spring","direction","timing","useNativeDriver","toValue","duration","start","onSwipeComplete","onSwipeLeft","onSwipeRight","item","rotate","interpolate","inputRange","outputRange","getLayout","transform","length","renderNoMoreCards","map","i","id","getCardStyle","styles","cardStyle","zIndex","panHandlers","renderCard","reverse","renderCards","defaultProps"],"mappings":";;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;;;;;;;AAUA,IAAMC,YAAY,GAAGC,UAAU,CAACC,GAAX,CAAe,QAAf,EAAyBC,KAA9C;AACA,IAAMC,eAAe,GAAG,OAAOJ,YAA/B;AACA,IAAMK,kBAAkB,GAAG,GAA3B;;IAEqBC,I;;;;;AAMnB,gBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,8BAAMA,KAAN;AAEA,QAAMC,QAAQ,GAAG,IAAIC,QAAQ,CAACC,OAAb,EAAjB;AACA,QAAMC,YAAY,GAAGC,YAAY,CAACC,MAAb,CAAoB;AACvCC,MAAAA,4BAA4B,EAAE;AAAA,eAAM,IAAN;AAAA,OADS;AAEvCC,MAAAA,kBAAkB,EAAE,4BAACC,KAAD,EAAQC,OAAR,EAAoB;AACtCT,QAAAA,QAAQ,CAACU,QAAT,CAAkB;AAChBC,UAAAA,CAAC,EAAEF,OAAO,CAACG,EADK;AACDC,UAAAA,CAAC,EAAEJ,OAAO,CAACK;AADV,SAAlB;AAGD,OANsC;AAOvCC,MAAAA,qBAAqB,EAAE,+BAACP,KAAD,EAAQC,OAAR,EAAoB;AACzC,YAAIA,OAAO,CAACG,EAAR,GAAahB,eAAjB,EAAkC;AAChC,gBAAKoB,UAAL,CAAgB,OAAhB;AACD,SAFD,MAEO,IAAIP,OAAO,CAACG,EAAR,GAAa,CAAChB,eAAlB,EAAmC;AACxC,gBAAKoB,UAAL,CAAgB,MAAhB;AACD,SAFM,MAEA;AACL,gBAAKC,aAAL;AACD;AACF;AAfsC,KAApB,CAArB;AAiBA,UAAKC,KAAL,GAAa;AAAEf,MAAAA,YAAY,EAAZA,YAAF;AAAgBH,MAAAA,QAAQ,EAARA,QAAhB;AAA0BmB,MAAAA,KAAK,EAAE;AAAjC,KAAb;AArBiB;AAsBlB;;;;qDAEgCC,S,EAAW;AAC1C,UAAIA,SAAS,CAACC,IAAV,KAAmB,KAAKtB,KAAL,CAAWsB,IAAlC,EAAwC;AACtC,aAAKC,QAAL,CAAc;AAAEH,UAAAA,KAAK,EAAE;AAAT,SAAd;AACD;AACF;;;iDAC4B;AAC3BI,MAAAA,SAAS,CAACC,qCAAV,IACED,SAAS,CAACC,qCAAV,CAAgD,IAAhD,CADF;AAEAC,MAAAA,eAAe,CAACC,MAAhB;AACD;;;+BACUC,S,EAAW;AAAA;;AACpB,UAAMhB,CAAC,GAAGgB,SAAS,KAAK,OAAd,GAAwBnC,YAAxB,GAAuC,CAACA,YAAlD;AACAS,MAAAA,QAAQ,CAAC2B,MAAT,CAAgB,KAAKV,KAAL,CAAWlB,QAA3B,EAAqC;AACnC6B,QAAAA,eAAe,EAAE,KADkB;AAEnCC,QAAAA,OAAO,EAAE;AAAEnB,UAAAA,CAAC,EAADA,CAAF;AAAKE,UAAAA,CAAC,EAAE;AAAR,SAF0B;AAGnCkB,QAAAA,QAAQ,EAAElC;AAHyB,OAArC,EAIGmC,KAJH,CAIS;AAAA,eAAM,MAAI,CAACC,eAAL,CAAqBN,SAArB,CAAN;AAAA,OAJT;AAKD;;;oCAEeA,S,EAAW;AAAA,wBACmB,KAAK5B,KADxB;AAAA,UACjBmC,WADiB,eACjBA,WADiB;AAAA,UACJC,YADI,eACJA,YADI;AAAA,UACUd,IADV,eACUA,IADV;AAEzB,UAAMe,IAAI,GAAGf,IAAI,CAAC,KAAKH,KAAL,CAAWC,KAAZ,CAAjB;AAEAQ,MAAAA,SAAS,KAAK,OAAd,GAAwBQ,YAAY,CAACC,IAAD,CAApC,GAA6CF,WAAW,CAACE,IAAD,CAAxD;AACA,WAAKlB,KAAL,CAAWlB,QAAX,CAAoBU,QAApB,CAA6B;AAAEC,QAAAA,CAAC,EAAE,CAAL;AAAQE,QAAAA,CAAC,EAAE;AAAX,OAA7B;AACA,WAAKS,QAAL,CAAc;AAAEH,QAAAA,KAAK,EAAE,KAAKD,KAAL,CAAWC,KAAX,GAAmB;AAA5B,OAAd;AACD;;;oCAEe;AACdlB,MAAAA,QAAQ,CAACyB,MAAT,CACE,KAAKR,KAAL,CAAWlB,QADb,EACuB;AACrB6B,QAAAA,eAAe,EAAE,KADI;AAErBC,QAAAA,OAAO,EAAE;AAAEnB,UAAAA,CAAC,EAAE,CAAL;AAAQE,UAAAA,CAAC,EAAE;AAAX;AAFY,OADvB,EAIGmB,KAJH;AAKD;;;mCACc;AAAA,UACLhC,QADK,GACQ,KAAKkB,KADb,CACLlB,QADK;AAEb,UAAMqC,MAAM,GAAGrC,QAAQ,CAACW,CAAT,CAAW2B,WAAX,CAAuB;AACpCC,QAAAA,UAAU,EAAE,CAAC,CAAC/C,YAAD,GAAgB,GAAjB,EAAsB,CAAtB,EAAyBA,YAAY,GAAG,GAAxC,CADwB;AAEpCgD,QAAAA,WAAW,EAAE,CAAC,SAAD,EAAY,MAAZ,EAAoB,QAApB;AAFuB,OAAvB,CAAf;AAIA,6CACKxC,QAAQ,CAACyC,SAAT,EADL;AAEEC,QAAAA,SAAS,EAAE,CAAC;AAAEL,UAAAA,MAAM,EAANA;AAAF,SAAD;AAFb;AAID;;;kCAEa;AAAA;;AACZ,UAAI,KAAKnB,KAAL,CAAWC,KAAX,IAAoB,KAAKpB,KAAL,CAAWsB,IAAX,CAAgBsB,MAAxC,EAAgD;AAC9C,eAAO,KAAK5C,KAAL,CAAW6C,iBAAX,EAAP;AACD;;AACD,aAAO,KAAK7C,KAAL,CAAWsB,IAAX,CACJwB,GADI,CACA,UAACT,IAAD,EAAOU,CAAP,EAAa;AAChB,YAAIA,CAAC,GAAG,MAAI,CAAC5B,KAAL,CAAWC,KAAnB,EAA0B;AACxB,iBAAO,IAAP;AACD;;AACD,YAAI2B,CAAC,KAAK,MAAI,CAAC5B,KAAL,CAAWC,KAArB,EAA4B;AAC1B,iBACE,oBAAC,QAAD,CAAU,IAAV;AACE,YAAA,GAAG,EAAEiB,IAAI,CAACW,EADZ;AAEE,YAAA,KAAK,EAAE,CACL,MAAI,CAACC,YAAL,EADK,EAELC,MAAM,CAACC,SAFF,EAGL;AAAEC,cAAAA,MAAM,EAAE;AAAV,aAHK;AAFT,aAOM,MAAI,CAACjC,KAAL,CAAWf,YAAX,CAAwBiD,WAP9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cASG,MAAI,CAACrD,KAAL,CAAWsD,UAAX,CAAsBjB,IAAtB,CATH,CADF;AAaD;;AACD,eACE,oBAAC,QAAD,CAAU,IAAV;AACE,UAAA,GAAG,EAAEA,IAAI,CAACW,EADZ;AAEE,UAAA,KAAK,EAAE,CAACE,MAAM,CAACC,SAAR,CAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAIG,MAAI,CAACnD,KAAL,CAAWsD,UAAX,CAAsBjB,IAAtB,CAJH,CADF;AAQD,OA5BI,EA4BFkB,OA5BE,EAAP;AA6BD;;;6BAEQ;AACP,aAAO,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAO,KAAKC,WAAL,EAAP,CAAP;AACD;;;;EAlH+BhE,S;;AAAbO,I,CACZ0D,Y,GAAe;AACpBrB,EAAAA,YAAY,EAAE,wBAAM,CAAG,CADH;AAEpBD,EAAAA,WAAW,EAAE,uBAAM,CAAG;AAFF,C;SADHpC,I;AAoHrB,IAAMmD,MAAM,GAAG;AACbC,EAAAA,SAAS,EAAE;AACTlD,IAAAA,QAAQ,EAAE,UADD;AAETL,IAAAA,KAAK,EAAEH;AAFE;AADE,CAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport {\r\n  View,\r\n  UIManager,\r\n  Animated,\r\n  PanResponder,\r\n  Dimensions,\r\n  LayoutAnimation,\r\n} from 'react-native'\r\n\r\nconst SCREEN_WIDTH = Dimensions.get('window').width;\r\nconst SWIPE_THRESHOLD = 0.25 * SCREEN_WIDTH;\r\nconst SWIPE_OUT_DURATION = 250;\r\n\r\nexport default class Deck extends Component {\r\n  static defaultProps = {\r\n    onSwipeRight: () => { },\r\n    onSwipeLeft: () => { },\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const position = new Animated.ValueXY();\r\n    const panResponder = PanResponder.create({\r\n      onStartShouldSetPanResponder: () => true,\r\n      onPanResponderMove: (event, gesture) => {\r\n        position.setValue({\r\n          x: gesture.dx, y: gesture.dy\r\n        });\r\n      },\r\n      onPanResponderRelease: (event, gesture) => {\r\n        if (gesture.dx > SWIPE_THRESHOLD) {\r\n          this.forceSwipe(\"right\")\r\n        } else if (gesture.dx < -SWIPE_THRESHOLD) {\r\n          this.forceSwipe(\"left\")\r\n        } else {\r\n          this.resetPosition();\r\n        }\r\n      },\r\n    });\r\n    this.state = { panResponder, position, index: 0 };\r\n  }\r\n\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    if (nextProps.data !== this.props.data) {    \r\n      this.setState({ index: 0 })\r\n    }\r\n  }\r\n  UNSAFE_componentWillUpdate() {\r\n    UIManager.setLayoutAnimationEnabledExperimental &&\r\n      UIManager.setLayoutAnimationEnabledExperimental(true);\r\n    LayoutAnimation.spring();\r\n  }\r\n  forceSwipe(direction) {\r\n    const x = direction === \"right\" ? SCREEN_WIDTH : -SCREEN_WIDTH;\r\n    Animated.timing(this.state.position, {\r\n      useNativeDriver: false,\r\n      toValue: { x, y: 0 },\r\n      duration: SWIPE_OUT_DURATION,\r\n    }).start(() => this.onSwipeComplete(direction));\r\n  }\r\n\r\n  onSwipeComplete(direction) {\r\n    const { onSwipeLeft, onSwipeRight, data } = this.props;\r\n    const item = data[this.state.index];\r\n\r\n    direction === \"right\" ? onSwipeRight(item) : onSwipeLeft(item);\r\n    this.state.position.setValue({ x: 0, y: 0 })\r\n    this.setState({ index: this.state.index + 1 })\r\n  }\r\n\r\n  resetPosition() {\r\n    Animated.spring(\r\n      this.state.position, {\r\n      useNativeDriver: false,\r\n      toValue: { x: 0, y: 0 },\r\n    }).start();\r\n  }\r\n  getCardStyle() {\r\n    const { position } = this.state;\r\n    const rotate = position.x.interpolate({\r\n      inputRange: [-SCREEN_WIDTH * 1.5, 0, SCREEN_WIDTH * 1.5],\r\n      outputRange: [\"-120deg\", \"0deg\", \"120deg\"]\r\n    });\r\n    return {\r\n      ...position.getLayout(),\r\n      transform: [{ rotate }]\r\n    }\r\n  }\r\n\r\n  renderCards() {\r\n    if (this.state.index >= this.props.data.length) {\r\n      return this.props.renderNoMoreCards();\r\n    }\r\n    return this.props.data\r\n      .map((item, i) => {\r\n        if (i < this.state.index) {\r\n          return null;\r\n        }\r\n        if (i === this.state.index) {\r\n          return (\r\n            <Animated.View\r\n              key={item.id}\r\n              style={[\r\n                this.getCardStyle(),\r\n                styles.cardStyle,\r\n                { zIndex: 99 }\r\n              ]}\r\n              {...this.state.panResponder.panHandlers}\r\n            >\r\n              {this.props.renderCard(item)}\r\n            </Animated.View>\r\n          );\r\n        }\r\n        return (\r\n          <Animated.View\r\n            key={item.id}\r\n            style={[styles.cardStyle]}\r\n          >\r\n            {this.props.renderCard(item)}\r\n          </Animated.View>\r\n        );\r\n      }).reverse();\r\n  }\r\n\r\n  render() {\r\n    return <View>{this.renderCards()}</View>;\r\n  }\r\n}\r\nconst styles = {\r\n  cardStyle: {\r\n    position: \"absolute\",\r\n    width: SCREEN_WIDTH\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}